(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9017f532"],{"2ee0":function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"g",function(){return c});var i=n("b775");function a(){return Object(i["a"])({url:"/system/menuV2/findAllMenus",method:"post",data:{}})}function r(e){return Object(i["a"])({url:"/system/menuV2/findMenuList",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/system/menuV2/addmenu",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/system/menuV2/findMenuById",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/system/menuV2/updatemenu",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/system/menuV2/deletemenu",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/system/menuV2/updownmenu",method:"post",data:e})}},"333d":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];n("c5f6");Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function u(e,t,n){var i=s(),a=e-i,u=20,l=0;t="undefined"===typeof t?500:t;var c=function e(){l+=u;var s=Math.easeInOutQuad(l,i,a,t);o(s),l<t?r(e):n&&"function"===typeof n&&n()};c()}var l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&u(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&u(0,800)}}},c=l,d=(n("7b5a"),n("2877")),p=Object(d["a"])(c,i,a,!1,null,"f7f8da82",null);t["a"]=p.exports},"5be3":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clearfix"},[n("div",{staticClass:"left"},[n("h4",[e._v("博识知识库")]),e._v(" "),n("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),n("div",{staticClass:"right"},[n("div",{attrs:{id:"topSearch"}},[n("el-input",{attrs:{placeholder:"请输入菜单名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.topSearch(t)}},model:{value:e.listQuery.menuname,callback:function(t){e.$set(e.listQuery,"menuname",t)},expression:"listQuery.menuname"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.topSearch},slot:"append"})],1),e._v(" "),n("span",{attrs:{slot:"reference",id:"advancedSearchBtn"},on:{click:function(t){e.popoverVisible=!e.popoverVisible}},slot:"reference"},[e._v("高级搜索"),n("i",{directives:[{name:"show",rawName:"v-show",value:e.popoverVisible,expression:"popoverVisible"}],staticClass:"el-icon-caret-bottom"}),n("i",{directives:[{name:"show",rawName:"v-show",value:!e.popoverVisible,expression:"!popoverVisible"}],staticClass:"el-icon-caret-top"})]),e._v(" "),n("transition",{attrs:{name:"fade-advanced-search"}},[n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.popoverVisible,expression:"popoverVisible"}]},[n("el-card",{attrs:{id:"advancedSearchArea",shadow:"never"}},[n("el-form",{ref:"form",attrs:{model:e.listQuery,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"标识"}},[n("el-input",{attrs:{placeholder:"请输入菜单标识",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.topSearch(t)}},model:{value:e.listQuery.cmark,callback:function(t){e.$set(e.listQuery,"cmark",t)},expression:"listQuery.cmark"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单模块"}},[n("el-select",{attrs:{placeholder:"请选择菜单模块",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.topSearch(t)}},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.menuType,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),n("div",{attrs:{id:"searchPopoverBtn"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.topSearch}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:""},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),n("div",{attrs:{id:"topBtn"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.add}},[n("i",{staticClass:"iconfont iconjia"}),e._v("新增")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+1+(e.listQuery.currentPage-1)*e.listQuery.pageSize))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"","min-width":"100",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"pointer",on:{click:function(n){return e.detail(t.row)}}},[e._v(e._s(t.row.menuname))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"标识","min-width":"130",align:"center","show-overflow-tooltip":"",prop:"cmark"}}),e._v(" "),n("el-table-column",{attrs:{label:"图标","min-width":"60",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.imagename?n("i",{class:"iconfont "+t.row.imagename}):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"路径","min-width":"130",align:"center","show-overflow-tooltip":"",prop:"menuurl"}}),e._v(" "),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"created_at",label:"模块","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.getMenuTypeName(t.row.type)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"操作",width:"220",align:"center",fixed:"right","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.edit(t.row)}}},[n("i",{staticClass:"iconfont iconxiugai"}),e._v("修改")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.del(t.row)}}},[n("i",{staticClass:"iconfont iconshanchu"}),e._v("删除")]),e._v(" "),n("el-dropdown",{attrs:{trigger:"click"}},[n("el-button",{attrs:{size:"mini"}},[n("i",{staticClass:"iconfont icongengduo"}),e._v("更多\n            ")]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return e.upMenu(t.row)}}},[n("i",{staticClass:"iconfont iconshangyi1"}),e._v("上移")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){return e.downMenu(t.row)}}},[n("i",{staticClass:"iconfont iconxiayi1"}),e._v("下移")])],1)],1)]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getMenuList}})],1)])},a=[],r=(n("55dd"),n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),o=n("db72"),s=n("333d"),u=n("2ee0"),l=n("2f62"),c=n("be22"),d=(n("20d6"),n("28a5"),n("6b54"),n("4360"));function p(e,t){var n=d["a"].state.permission.userPermission,i=d["a"].state.permission.allPermissionCode,a=d["a"].state.permission.userPermissionDetailList;if(n.isAdmin||t)return!0;if(i.indexOf(e)>-1){var r=a.findIndex(function(e){return e.manageType+""===n.manageType});return r>-1&&e===a[r].permissioncode}return!0}var m={components:{Pagination:s["a"]},computed:Object(o["a"])({},Object(l["b"])(["menuType"])),data:function(){return{list:[],listLoading:!0,total:0,listQuery:{currentPage:1,pageSize:10,pid:"firstMenu",menuname:"",cmark:"",type:""},popoverVisible:!1,treeData:[],defaultProps:{children:"children",label:"label"},pid:"firstMenu",pname:"菜单管理"}},created:function(){p("egroup-delete"),this.listQuery.pid=this.$store.state.menuManage.pid||"firstMenu",this.getAllMenuList(),this.getMenuList()},methods:{getMenuList:function(){var e=this;this.listLoading=!0,Object(u["d"])(this.listQuery).then(function(t){e.list=t.data.page.list,e.total=t.data.page.totalCount,e.listLoading=!1})},getAllMenuList:function(){var e=this;Object(u["e"])().then(function(t){var n=t.data.MenuV2List;e.treeData=e.translate(n)})},topSearch:function(){this.getMenuList()},reset:function(){this.listQuery.menuname="",this.listQuery.cmark="",this.listQuery.type="",this.getMenuList()},handleNodeClick:function(e){this.listQuery.currentPage=1,this.listQuery.menuname="",this.listQuery.cmark="",this.listQuery.type="",this.listQuery.pid=e.id,this.pid=e.id,this.pname=e.label,this.getMenuList()},add:function(){this.$router.push({path:"/systemManage/menuManage/add",query:{pid:this.pid,pname:this.pname}})},detail:function(e){this.$router.push({path:"/systemManage/menuManage/detail",query:{_id:e._id}})},del:function(e){var t=this;this.$confirm("确定要删除【"+e.menuname+"】吗？","删除菜单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u["b"])({_id:e._id}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("删除成功！"),Object(c["a"])(),t.list.length-1===0&&(t.listQuery.currentPage-=1),t.getAllMenuList(),t.getMenuList();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){})},edit:function(e){this.$router.push({path:"/systemManage/menuManage/edit",query:{id:e._id}})},upMenu:function(e){var t=this;Object(u["g"])({orderby:"up",pid:e.pid,_id:e._id}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("上移成功！"),Object(c["a"])(),t.getAllMenuList(),t.getMenuList();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},downMenu:function(e){var t=this;Object(u["g"])({orderby:"down",pid:e.pid,_id:e._id}).then(function(e){t.$message.success("下移成功！"),Object(c["a"])(),t.getAllMenuList(),t.getMenuList()})},getMenuTypeName:function(e){var t="";return this.menuType.forEach(function(n){n.id===e&&(t=n.name)}),t},translate:function(e){if(!(e&&e.length>0))return[];var t=[],n={},i={},a=[];a.push(t);for(var r=function(e){if(e in i)return i[e];var t=[];return i[e]=t,a.push(t),i[e]},o=0;o<e.length;o++){var s=e[o],u={},l=r(s.cid);u["label"]=s["menuname"],u["children"]=l,u["orders"]=s["orders"],u["id"]=s["cid"];var c=s.pid;if("firstMenu"===c)t.push(u);else{var d=r(c);d.push(u)}n[s.cid]=u}for(var p=function(e,t){return e.orders-t.orders},m=0;m<a.length;m++){var f=a[m];f.sort(p)}var h=[{}];return h[0].children=t,h[0].id="firstMenu",h[0].label="菜单管理",h[0].orders=1,h}},beforeRouteLeave:function(e,t,n){-1===e.path.indexOf("/menuManage/")?this.$store.dispatch("menuManage/setMenuPid","firstMenu"):this.$store.dispatch("menuManage/setMenuPid",this.listQuery.pid),n()}},f=m,h=(n("62ab"),n("2877")),g=Object(h["a"])(f,i,a,!1,null,"4a1cac3a",null);t["default"]=g.exports},"62ab":function(e,t,n){"use strict";var i=n("c301"),a=n.n(i);a.a},"7b5a":function(e,t,n){"use strict";var i=n("ee9a"),a=n.n(i);a.a},be22:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n("96cf");var i=n("3b8d"),a=n("a18c"),r=n("4360");function o(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].dispatch("user/getInfo");case 2:return t=e.sent,n=t.systemRoutes,i=t.backstageRoutes,e.next=7,r["a"].dispatch("permission/generateRoutes",{systemRoutes:n,backstageRoutes:i});case 7:return Object(a["d"])(),a["c"].addRoutes(r["a"].state.permission.systemRoutes),e.next=11,r["a"].dispatch("permission/set_permission_routes",1);case 11:case"end":return e.stop()}},e)})),s.apply(this,arguments)}},c301:function(e,t,n){},ee9a:function(e,t,n){}}]);
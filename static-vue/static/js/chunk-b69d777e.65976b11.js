(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b69d777e"],{"4e7a":function(e,t,r){},"541d":function(e,t,r){"use strict";var o=r("4e7a"),s=r.n(o);s.a},"6de4":function(e,t,r){"use strict";r.d(t,"j",function(){return s}),r.d(t,"c",function(){return n}),r.d(t,"d",function(){return a}),r.d(t,"g",function(){return i}),r.d(t,"e",function(){return l}),r.d(t,"i",function(){return u}),r.d(t,"h",function(){return c}),r.d(t,"a",function(){return d}),r.d(t,"f",function(){return m}),r.d(t,"b",function(){return f}),r.d(t,"k",function(){return p});var o=r("b775");function s(e){return Object(o["a"])({url:"/system/roleV2/findRoleList",method:"post",data:e})}function n(e){return Object(o["a"])({url:"system/roleV2/getAllRole",method:"post",data:e})}function a(){return Object(o["a"])({url:"/system/customV2/getCustomManageList",method:"post",data:{}})}function i(e){return Object(o["a"])({url:"/system/roleV2/addrole",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/system/roleV2/findRoleById",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/system/roleV2/upateRole",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/roleV2/deleterole",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/system/roleV2/deleteMultiRole",method:"post",data:e})}function m(){return Object(o["a"])({url:"/system/roleV2/getDefaultManage",method:"post",data:{}})}function f(e){return Object(o["a"])({url:"/system/roleV2/findAllMenus",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/system/roleV2/saveMenu",method:"post",data:e})}},a888:function(e,t,r){"use strict";r("a481"),r("6762"),r("2fdb");var o={bind:function(e,t,r){var o=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");o.style.cssText+=";cursor:move;",s.style.cssText+=";top:0px;";var n=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();o.onmousedown=function(e){var t=e.clientX-o.offsetLeft,a=e.clientY-o.offsetTop,i=s.offsetWidth,l=s.offsetHeight,u=document.body.clientWidth,c=document.body.clientHeight,d=s.offsetLeft,m=u-s.offsetLeft-i,f=s.offsetTop,p=c-s.offsetTop-l,g=n(s,"left"),h=n(s,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var o=e.clientX-t,n=e.clientY-a;-o>d?o=-d:o>m&&(o=m),-n>f?n=-f:n>p&&(n=p),s.style.cssText+=";left:".concat(o+g,"px;top:").concat(n+h,"px;"),r.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},s=function(e){e.directive("el-drag-dialog",o)};window.Vue&&(window["el-drag-dialog"]=o,Vue.use(s)),o.install=s;t["a"]=o},b6f1:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-edit"},[r("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"status-icon":!0,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"用户名称"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属企业"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.customname,callback:function(t){e.$set(e.form,"customname",t)},expression:"form.customname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{attrs:{placeholder:"请输入昵称","max-length":20,clearable:""},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否修改密码"}},[r("el-radio-group",{model:{value:e.setUpPwd,callback:function(t){e.setUpPwd=t},expression:"setUpPwd"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),e.setUpPwd?r("el-form-item",{attrs:{label:"新密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码",type:"password",autocomplete:"new-password",maxlength:"50",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"用户状态",prop:"userStatus"}},[r("el-radio-group",{model:{value:e.form.userStatus,callback:function(t){e.$set(e.form,"userStatus",t)},expression:"form.userStatus"}},[r("el-radio",{attrs:{label:1}},[e._v("生效")]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v("失效")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱地址",clearable:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入描述","max-length":256,clearable:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"falseRole"}},[r("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.form.falseRole,callback:function(t){e.$set(e.form,"falseRole",t)},expression:"form.falseRole"}}),e._v(" "),e._l(e.roles,function(t){return r("span",{key:t._id,staticClass:"role"},[e._v(e._s(t.rolename))])}),e._v(" "),r("span",{staticClass:"pointer",on:{click:e.getAllRoles}},[e._v("修改")])],2),e._v(" "),r("el-form-item",{attrs:{label:"小组",prop:"einc"}},[e._l(e.egroups,function(t){return r("span",{key:t._id,staticClass:"role"},[e._v(e._s(t.groupName))])}),e._v(" "),r("span",{staticClass:"pointer",on:{click:e.getEgroups}},[e._v("修改")])],2)],1),e._v(" "),r("div",{attrs:{id:"btnGroup"}},[r("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(t){return e.save("form")}}},[e._v("提交")]),e._v(" "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.cancel("form")}}},[e._v("取消")])],1),e._v(" "),r("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"setRolesDialog",attrs:{width:"650px",title:"分配角色",visible:e.setRolesDialogVisible},on:{"update:visible":function(t){e.setRolesDialogVisible=t}}},[r("el-transfer",{attrs:{data:e.form.noList,titles:["未分配角色","已分配角色"],props:e.defaultProps},on:{change:e.handleTransferChange},model:{value:e.roleIdList,callback:function(t){e.roleIdList=t},expression:"roleIdList"}}),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.setRoles}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){e.setRolesDialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),r("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"setRolesDialog",attrs:{width:"650px",title:"分配小组",visible:e.setEgroupsDialogVisible},on:{"update:visible":function(t){e.setEgroupsDialogVisible=t}}},[r("el-transfer",{staticClass:"setEgroups",attrs:{data:e.form.noList2,titles:["未分配小组","已分配小组"],props:e.defaultProps2},on:{change:e.handleTransferChange2},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.option;return r("span",{},[e._v(e._s(o.label)+"\n        "),r("span",{staticClass:"groupName"},[e._v(e._s(o.groupName))]),e._v(" "),r("div",{staticClass:"fr eincs"},[r("el-checkbox-group",{model:{value:e.chargemanList,callback:function(t){e.chargemanList=t},expression:"chargemanList"}},[r("el-checkbox",{attrs:{label:o.inc,checked:o.manage}},[e._v("组长")])],1)],1)])}}]),model:{value:e.einc,callback:function(t){e.einc=t},expression:"einc"}}),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.setEgroups}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){e.setEgroupsDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],n=(r("ac6a"),r("6de4")),a=r("cc66"),i=r("e81f"),l=r("61f7"),u=r("a888"),c={directives:{elDragDialog:u["a"]},data:function(){var e=function(e,t,r){t=t||"",Object(l["i"])(t)?r():r(new Error("请输入用户登入平台的名称（长度在 2 到 20 位字母或数字）"))},t=function(e,t,r){t=t||"",Object(l["h"])(t)?r():r(new Error("请输入密码，（长度 6 到 50 位，字母和数字组成）"))};return{dataIsChange:0,noLeaveprompt:!1,setRolesDialogVisible:!1,setEgroupsDialogVisible:!1,id:"",form:{username:"",groupId:"",nickname:"",phone:"",password:"",setUpPwd:0,userStatus:1,email:"",desc:"",roleIdList:[],falseRole:"",einc:[],minc:[]},setUpPwd:0,custom_list:[],roles:[],egroups:[],defaultProps:{key:"_id",label:"rolename"},defaultProps2:{key:"inc",label:"groupName"},roleIdList:[],einc:[],chargemanList:[],rules:{nickname:[{required:!0,message:"请输入用户登入平台后显示的名称（长度在 2 到 20 位字符）",trigger:"blur"},{required:!0,message:"请输入用户登入平台后显示的名称（长度在 2 到 20 位字符）",trigger:"change"},{min:2,max:20,message:"长度在 2 到 20 位字符",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 位字符",trigger:"change"}],phone:[{required:!0,validator:e,message:"请输入11位手机号",trigger:"blur"},{required:!0,validator:e,message:"请输入11位手机号",trigger:"change"}],password:[{required:!0,validator:t,message:"请输入密码，（长度 6 到 50 位，字母和数字组成）",trigger:"blur"},{required:!0,validator:t,message:"请输入密码，（长度 6 到 50 位，字母和数字组成）",trigger:"change"},{min:6,max:50,message:"长度在 6 到 50 位字符",trigger:"blur"},{min:6,max:50,message:"长度在 6 到 50 位字符",trigger:"change"}],userStatus:[{required:!0,message:"请选择用户状态",trigger:"blur"},{required:!0,message:"请选择用户状态",trigger:"change"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],falseRole:[{required:!0,message:"请选择角色",trigger:"blur"},{required:!0,message:"请选择角色",trigger:"change"}]}}},watch:{form:{handler:function(e){e&&this.dataIsChange++},deep:!0}},created:function(){this.id=this.$route.query.id,this.getCustomManageList()},methods:{getUserById:function(){var e=this;Object(i["e"])({_id:this.id}).then(function(t){e.form=t.data.user,e.roleIdList=[],t.data.user.roleList.forEach(function(t){e.roleIdList.push(t._id)}),e.roles=e.form.roleList,e.roles.length&&(e.form.falseRole="11111"),e.egroups=e.form.groupList,t.data.user.groupList.forEach(function(t){e.einc.push(t.inc),t.manage&&e.chargemanList.push(t.inc)})})},getCustomManageList:function(){var e=this;Object(n["d"])().then(function(t){e.custom_list=t.data,e.getUserById()})},save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){switch(t.setUpPwd){case 0:t.form.setUpPwd="N";break;case 1:t.form.setUpPwd="Y";break}t.form.minc=t.chargemanList,t.form.roleIdList=t.roleIdList,delete t.form.falseRole,delete t.form.noList,delete t.form.noList2,Object(i["c"])(t.form).then(function(e){t.$message.success("添加用户成功！"),t.noLeaveprompt=!0,t.$router.push({path:"/user-center/user-manage/detail",query:{id:e.data._id}})})}})},cancel:function(){this.$router.push({path:"/user-center/user-manage/list"})},getAllRoles:function(){var e=this;Object(n["c"])({_id:this.id}).then(function(t){e.form.noList=t.data.allRoleList,e.setRolesDialogVisible=!0})},handleTransferChange:function(e,t,r){this.roleIdList=e},handleTransferChange2:function(e,t,r){this.form.einc=e},setRoles:function(){var e=this;this.setRolesDialogVisible=!1,this.roles=[],this.roleIdList.length?(this.form.falseRole="11111",this.form.noList.forEach(function(t,r){e.roleIdList.forEach(function(r){r===t._id&&e.roles.push(t)})})):this.form.falseRole=""},getEgroups:function(){var e=this;Object(a["f"])({_id:this.id}).then(function(t){e.form.noList2=t.data.allEmployeeGroupList,e.setEgroupsDialogVisible=!0})},setEgroups:function(){var e=this;this.setEgroupsDialogVisible=!1,this.egroups=[],this.form.einc.length&&this.form.noList2.forEach(function(t,r){e.form.einc.forEach(function(r){r===t.inc&&e.egroups.push(t)})})}},beforeRouteLeave:function(e,t,r){var o=this;this.dataIsChange&&!this.noLeaveprompt?setTimeout(function(){o.$confirm("您的数据尚未保存，是否离开？","离开页面",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r()}).catch(function(){r(!1)})},200):r()}},d=c,m=(r("541d"),r("2877")),f=Object(m["a"])(d,o,s,!1,null,"41da21d2",null);t["default"]=f.exports},cc66:function(e,t,r){"use strict";r.d(t,"g",function(){return s}),r.d(t,"e",function(){return n}),r.d(t,"f",function(){return a}),r.d(t,"i",function(){return i}),r.d(t,"h",function(){return l}),r.d(t,"j",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"b",function(){return d}),r.d(t,"d",function(){return m}),r.d(t,"k",function(){return f}),r.d(t,"c",function(){return p});var o=r("b775");function s(){return Object(o["a"])({url:"/system/customV2/getCustomManageList",method:"post",data:{}})}function n(e){return Object(o["a"])({url:"system/employeeGroupV2/findEmployeeGroupList",method:"post",data:e})}function a(e){return Object(o["a"])({url:"system/employeeGroup/getAllEmployeeGroup",method:"post",data:e})}function i(e){return Object(o["a"])({url:"system/user/getUserEgroupInfo",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/system/employeeGroup/findEmployeeGroupById",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/system/employeeGroup/upateEmployeeGroup",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/employeeGroup/addEmployeeGroup",method:"post",data:e})}function d(e){return Object(o["a"])({url:"system/employeeGroup/deleteEmployeeGroup",method:"post",data:e})}function m(e){return Object(o["a"])({url:"system/skill/egroupskill",method:"post",data:e})}function f(e){return Object(o["a"])({url:"/system/employeeGroup/groupskill",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/system/roleV2/deleteMultiRole",method:"post",data:e})}},e81f:function(e,t,r){"use strict";r.d(t,"f",function(){return s}),r.d(t,"c",function(){return n}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return i}),r.d(t,"h",function(){return l}),r.d(t,"g",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"b",function(){return d});var o=r("b775");function s(e){return Object(o["a"])({url:"/system/userV2/listUser",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/system/userV2/createUser",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/system/userV2/deleteUser",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/system/userV2/getUserById",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/system/userV2/updateUserStatus",method:"post",data:e})}function u(e){return Object(o["a"])({url:"system/userImport/importUsersV2",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/userV2/saveRole",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/system/user/saveEmployeeGroup",method:"post",data:e})}}}]);
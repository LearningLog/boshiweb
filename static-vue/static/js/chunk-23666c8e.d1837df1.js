(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23666c8e"],{"1b660":function(e,t,o){"use strict";var i=o("ca9f"),r=o.n(i);r.a},"5a43":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-edit"},[o("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px","status-icon":!0}},[o("el-form-item",{staticClass:"logoClass",attrs:{label:"平台Logo"}},[o("el-upload",{ref:"uploadDeskTopLogo",staticClass:"uploadDeskTopLogo",attrs:{name:"thumbnailfile",action:e.uploadUrl(),headers:e.headers,accept:".jpg,.png,.gif,.jepg,.jpeg",drag:"",data:e.fileInfo,limit:2,"file-list":e.fileList1,"list-type":"picture-card","auto-upload":!1,"on-change":e.changeUpload,"on-success":e.handleSuccess,"on-error":e.handleUploadError,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove},nativeOn:{click:function(t){return e.logoTypes(1)}}},[o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),o("el-form-item",{staticClass:"logoClass",attrs:{label:"移动端Logo"}},[o("el-upload",{ref:"uploadMobileLogo",staticClass:"uploadMobileLogo",attrs:{name:"thumbnailfile",action:e.uploadUrl(),headers:e.headers,accept:".jpg,.png,.gif,.jepg,.jpeg",drag:"",data:e.fileInfo,limit:2,"file-list":e.fileList2,"list-type":"picture-card","auto-upload":!1,"on-change":e.changeUpload,"on-success":e.handleSuccess,"on-error":e.handleUploadError,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove},nativeOn:{click:function(t){return e.logoTypes(2)}}},[o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),o("el-form-item",{attrs:{label:"系统名称"}},[o("el-input",{attrs:{maxlength:"64",placeholder:"请输入系统名称",clearable:""},model:{value:e.form.logo_name,callback:function(t){e.$set(e.form,"logo_name",t)},expression:"form.logo_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.logo_desc,callback:function(t){e.$set(e.form,"logo_desc",t)},expression:"form.logo_desc"}})],1)],1),e._v(" "),o("div",{attrs:{id:"btnGroup"}},[o("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")])],1),e._v(" "),o("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"图片剪裁",visible:e.cropperDialogVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.cropperDialogVisible=t},close:e.closeUpload}},[o("div",{staticClass:"cropper-content"},[o("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[o("vueCropper",{ref:"cropper",attrs:{img:e.option.img,"output-size":e.option.size,"output-type":e.option.outputType,info:e.option.info,full:e.option.full,fixed:e.option.fixed,"fixed-number":e.option.fixedNumber,"can-move":e.option.canMove,"can-move-box":e.option.canMoveBox,"fixed-box":e.option.fixedBox,original:e.option.original,"auto-crop":e.option.autoCrop,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight,"center-box":e.option.centerBox,high:e.option.high},on:{realTime:e.realTime,imgLoad:e.imgLoad}}),e._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"downLoadImg",attrs:{href:"javascript:;"}})],1),e._v(" "),o("div",{staticClass:"show-preview",style:{width:"180px",height:"180px",overflow:"hidden",margin:"5px"}},[o("div",{staticClass:"preview",style:e.previews.div},[o("img",{staticClass:"previewImg",attrs:{src:e.previews.url}})])])]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:e.finish}},[e._v("确认")]),e._v(" "),o("el-button",{on:{click:e.closeUpload}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"图片预览",width:"38%",visible:e.logoDialogVisible},on:{"update:visible":function(t){e.logoDialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.logoUrl,alt:""}})])],1)},r=[],a=(o("7f7f"),o("61f7")),n=o("7e79"),s=o("a888"),l=o("aebb"),u=o("c0d7"),c=o("5f87"),d=o("4360"),m=window.$,g={components:{VueCropper:n["VueCropper"]},directives:{elDragDialog:s["a"]},data:function(){return{dataIsChange:0,noLeaveprompt:!1,id:"",form:{},isChangeTuser:0,headers:{Authorization:Object(c["a"])()},logoType:"",fileName:"",fileList1:[],fileList2:[],cropperDialogVisible:!1,logoDialogVisible:!1,clearFiles:!0,logoUrl:"",deskTopImageUrl:"",mobileImageUrl:"",fileInfo:{},option:{img:"",info:!1,outputSize:.8,outputType:"png",canScale:!1,fixedBox:!1,fixed:!0,fixedNumber:[1,1],autoCrop:!0,autoCropWidth:180,autoCropHeight:180,full:!1,canMoveBox:!0,original:!1,centerBox:!0,infoTrue:!0,high:!0,size:1},previews:{},rules:{customname:[{required:!0,message:"请输入租户名称（长度在 1 到 64 个字符）",trigger:"blur"},{required:!0,message:"请输入租户名称（长度在 1 到 64 个字符）",trigger:"change"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"change"}],desc:[{required:!0,message:"请输入租户描述（长度在 1 到 100 个字符）",trigger:"blur"},{required:!0,message:"请输入租户描述（长度在 1 到 100 个字符）",trigger:"change"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"change"}],userCount:[{required:!0,message:"请输入最大用户数（长度在 1 到 120 个字符）",trigger:"blur"},{required:!0,message:"请输入最大用户数（长度在 1 到 120 个字符）",trigger:"change"}],customStatus:[{required:!0,message:"请选择租户状态",trigger:"change"}],text_extraction:[{required:!0,message:"请选择是否开通智能搜索",trigger:"change"}],uName:[{required:!0,message:"请输入租户管理员（长度在 2 到 64 个字符）",trigger:"blur"},{required:!0,message:"请输入租户管理员（长度在 2 到 64 个字符）",trigger:"change"},{min:2,max:64,message:"长度在 2 到 64 个字符",trigger:"blur"},{min:2,max:64,message:"长度在 2 到 64 个字符",trigger:"change"}],uNickname:[{required:!0,message:"请输入管理员昵称（长度在 2 到 20 个字符）",trigger:"blur"},{required:!0,message:"请输入管理员昵称（长度在 2 到 20 个字符）",trigger:"change"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"change"}],uPwd:[{required:!0,message:"请输入管理员密码（长度在 6 到 50 个字符）",trigger:"blur"},{required:!0,message:"请输入管理员密码（长度在 6 到 50 个字符）",trigger:"change"},{min:6,max:50,message:"长度在 6 到 50 个字符",trigger:"blur"},{min:6,max:50,message:"长度在 6 到 50 个字符",trigger:"change"}]}}},watch:{form:{handler:function(e){e&&this.dataIsChange++},deep:!0}},created:function(){this.id=this.$store.state.user.userSystemInfo.userInfo._id,this.getTenant()},methods:{getTenant:function(){var e=this;console.log(this.$store.state.user.userSystemInfo.userInfo._id),Object(l["h"])({_id:this.id}).then(function(t){var o={platform_url:t.data.platform_url,mobile_url:t.data.mobile_url,logo_name:t.data.logo_name,logo_desc:t.data.logo_desc};t.data.platform_url&&(e.fileList1=[{name:"",url:t.data.platform_url}],m(".uploadDeskTopLogo .el-upload--picture-card").hide()),t.data.mobile_url&&(e.fileList2=[{name:"",url:t.data.mobile_url}],m(".uploadMobileLogo .el-upload--picture-card").hide()),e.form=o,e.dataIsChange=-1,console.log(o.logo_name,3323)})},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){switch(t.isChangeTuser){case 0:t.form.isChangeTuser="n";break;case 1:t.form.isChangeTuser="y";break}Object(l["k"])(t.form).then(function(e){t.$message.success("设置成功！"),t.noLeaveprompt=!0,d["a"].dispatch("user/setLogo_Name",{platform_url:t.form.platform_url,logo_name:t.form.logo_name})})}})},uploadUrl:function(){return"http://bs.yunshicloud.com/system/file/upload/"},logoTypes:function(e){this.logoType=e},changeUpload:function(e,t){var o=this,i=[".png",".jpg",".gif",".jepg",".jpeg"],r=e.name.lastIndexOf("."),a=e.name.slice(r);if(-1===i.indexOf(a))return this.$message.error("文件格式错误！"),1===this.logoType?this.fileList1=[]:this.fileList2=[],!1;var n=e.size/1024/1024<5;if(!n)return this.$message.error("上传文件大小不能超过 5MB！"),1===this.logoType?this.fileList1=[]:this.fileList2=[],!1;this.fileName=e.name,this.$nextTick(function(){o.option.img=e.url,o.cropperDialogVisible=!0})},handleSuccess:function(e,t,o){console.log(t)},handleUploadError:function(e,t,o){this.$message.error("上传文件失败！"),1===this.logoType?this.fileList1=[]:this.fileList2=[]},beforeRemove:function(e,t){return this.$confirm("您确定要删除logo吗？","删除图片",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},handleRemove:function(e,t){console.log(e,t),1===this.logoType?(this.form.platform_url="",m(".uploadDeskTopLogo .el-upload--picture-card").show()):(this.form.mobile_url="",m(".uploadMobileLogo .el-upload--picture-card").show())},handlePreview:function(e){this.logoUrl=e.url,this.logoDialogVisible=!0},finish:function(){var e=this;this.clearFiles=!1;var t=new FormData;this.$refs.cropper.getCropBlob(function(o){t.append("thumbnailfile",o,e.fileName),Object(u["d"])(t).then(function(t){1===e.logoType?(e.deskTopImageUrl=t.data.saveHttpPath,e.form.platform_url=t.data.saveHttpPath,e.fileList1=[{name:t.data.originalFilename,url:t.data.saveHttpPath}],m(".uploadDeskTopLogo .el-upload--picture-card").hide()):(e.mobileImageUrl=t.data.saveHttpPath,e.form.mobile_url=t.data.saveHttpPath,e.fileList2=[{name:t.data.originalFilename,url:t.data.saveHttpPath}],m(".uploadMobileLogo .el-upload--picture-card").hide()),e.fileInfo={},e.cropperDialogVisible=!1})})},closeUpload:function(){this.clearFiles&&(1===this.logoType?this.$refs["uploadDeskTopLogo"].clearFiles():this.$refs["uploadMobileLogo"].clearFiles(),this.cropperDialogVisible=!1,this.clearFiles=!0),this.clearFiles=!0},realTime:function(e){var t=this;this.$refs.cropper.getCropData(function(o){t.previews=e,t.previews.url=o})},imgLoad:function(e){console.log(e)},intNum:function(e){this.form.userCount=Object(a["f"])(e)}},beforeRouteLeave:function(e,t,o){var i=this;this.dataIsChange&&!this.noLeaveprompt?setTimeout(function(){i.$confirm("您的数据尚未保存，是否离开？","离开页面",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o()}).catch(function(){o(!1)})},200):o()}},p=g,f=(o("1b660"),o("2877")),h=Object(f["a"])(p,i,r,!1,null,"7382d42a",null);t["default"]=h.exports},a888:function(e,t,o){"use strict";o("a481"),o("6762"),o("2fdb");var i={bind:function(e,t,o){var i=e.querySelector(".el-dialog__header"),r=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",r.style.cssText+=";top:0px;";var a=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,n=e.clientY-i.offsetTop,s=r.offsetWidth,l=r.offsetHeight,u=document.body.clientWidth,c=document.body.clientHeight,d=r.offsetLeft,m=u-r.offsetLeft-s,g=r.offsetTop,p=c-r.offsetTop-l,f=a(r,"left"),h=a(r,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,a=e.clientY-n;-i>d?i=-d:i>m&&(i=m),-a>g?a=-g:a>p&&(a=p),r.style.cssText+=";left:".concat(i+f,"px;top:").concat(a+h,"px;"),o.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},r=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(r)),i.install=r;t["a"]=i},aebb:function(e,t,o){"use strict";o.d(t,"e",function(){return r}),o.d(t,"a",function(){return a}),o.d(t,"g",function(){return n}),o.d(t,"d",function(){return s}),o.d(t,"c",function(){return l}),o.d(t,"b",function(){return u}),o.d(t,"i",function(){return c}),o.d(t,"f",function(){return d}),o.d(t,"j",function(){return m}),o.d(t,"k",function(){return g}),o.d(t,"h",function(){return p});var i=o("b775");function r(e){return Object(i["a"])({url:"/system/customV2/findCustomList",method:"post",data:e})}function a(e){return Object(i["a"])({url:"/system/customV2/addcustom",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/system/customV2/findCustomById",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/system/customV2/updatecustom",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/system/customV2/deletecustom",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/system/customV2/deleteMultiCustom",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/system/customV2/setCustomStatus",method:"post",data:e})}function d(e){return Object(i["a"])({url:"system/newscategory/all",method:"post",data:e})}function m(e){return Object(i["a"])({url:"system/custom/saveCustomCategory",method:"post",data:e})}function g(e){return Object(i["a"])({url:"/system/user/upload",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/system/user/onload",method:"post",data:e})}},c0d7:function(e,t,o){"use strict";o.d(t,"d",function(){return n}),o.d(t,"b",function(){return s}),o.d(t,"a",function(){return l}),o.d(t,"c",function(){return u});var i=o("b775"),r=o("bc3a"),a=o.n(r);function n(e){return Object(i["a"])({url:"/system/file/upload/",method:"post",data:e})}function s(e,t){return a()({url:t+"/fileUploadCheck",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/workDeskFileList/addFile",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/knowledgeDirFile/createFile",method:"post",data:e})}},ca9f:function(e,t,o){}}]);
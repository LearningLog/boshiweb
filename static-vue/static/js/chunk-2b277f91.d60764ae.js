(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b277f91"],{"132a":function(t,e,a){"use strict";var r=a("ac9f"),o=a.n(r);o.a},ac9f:function(t,e,a){},eb5b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form-edit"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px","status-icon":!0}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("span",[t._v(t._s(t.form.customname))])]),t._v(" "),a("el-form-item",{attrs:{label:"套餐名称",prop:"payTypeName"}},[a("el-input",{attrs:{placeholder:"请输入套餐名称",maxlength:"20",clearable:""},model:{value:t.form.payTypeName,callback:function(e){t.$set(t.form,"payTypeName",e)},expression:"form.payTypeName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"员工规模（个）",prop:"totalUserCount"}},[a("el-input",{attrs:{placeholder:"请输入员工规模",maxlength:"5",clearable:""},nativeOn:{keyup:function(e){return t.intNum(t.form.totalUserCount,"totalUserCount")}},model:{value:t.form.totalUserCount,callback:function(e){t.$set(t.form,"totalUserCount",e)},expression:"form.totalUserCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"短信总量（条）",prop:"totalSms"}},[a("el-input",{attrs:{placeholder:"请输入短信总量",maxlength:"5",clearable:""},nativeOn:{keyup:function(e){return t.intNum(t.form.totalSms,"totalSms")}},model:{value:t.form.totalSms,callback:function(e){t.$set(t.form,"totalSms",e)},expression:"form.totalSms"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"存储总量（G）",prop:"totalStorageSpace"}},[a("el-input",{attrs:{placeholder:"请输入存储总量",maxlength:"7",clearable:""},on:{blur:function(e){return t.blurNum(t.form.totalStorageSpace)}},nativeOn:{keyup:function(e){return t.intNum(t.form.totalStorageSpace,"totalStorageSpace")}},model:{value:t.form.totalStorageSpace,callback:function(e){t.$set(t.form,"totalStorageSpace",e)},expression:"form.totalStorageSpace"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"有效期",prop:"effectTime"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.form.effectTime,callback:function(e){t.$set(t.form,"effectTime",e)},expression:"form.effectTime"}})],1)],1),t._v(" "),a("div",{attrs:{id:"btnGroup"}},[a("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.cancel("form")}}},[t._v("取消")])],1)],1)])},o=[],n=a("61f7"),i=a("ec5d"),s={data:function(){var t=function(t,e,a){e=e||[],e[0]&&e[1]?a():a(new Error("请选择有效日期"))},e=function(t,e,a){e||0===e?e>9999?a(new Error("请输入存储总量，最多9,999G")):a():a(new Error("请输入存储总量，最多9,999G"))};return{dataIsChange:0,noLeaveprompt:!1,id:"",form:{customname:"",payTypeName:"",totalUserCount:"",totalSms:"",totalStorageSpace:"",startTime:"",endTime:"",effectTime:[]},rules:{payTypeName:[{required:!0,message:"套餐名称（长度在 1 到 20 个字符）",trigger:"blur"},{required:!0,message:"套餐名称（长度在 1 到 20 个字符）",trigger:"change"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"change"}],totalUserCount:[{required:!0,message:"请输入员工规模",trigger:"blur"},{required:!0,message:"请输入员工规模",trigger:"change"}],totalSms:[{required:!0,message:"请输入短信总量",trigger:"blur"},{required:!0,message:"请输入短信总量",trigger:"change"}],totalStorageSpace:[{required:!0,validator:e,message:"请输入存储总量，最多9,999G",trigger:"blur"},{required:!0,validator:e,message:"请输入存储总量，最多9,999G",trigger:"change"}],effectTime:[{required:!0,validator:t,trigger:"blur"},{required:!0,validator:t,trigger:"change"}]}}},watch:{form:{handler:function(t){t&&this.dataIsChange++},deep:!0}},created:function(){this.id=this.$route.query._id,this.getInitData()},methods:{getInitData:function(){var t=this;Object(i["b"])({_id:this.id}).then(function(e){var a={_id:e.data._id,customname:e.data.customname,payTypeName:e.data.payTypeName,totalUserCount:e.data.totalUserCount,totalSms:e.data.totalSms,totalStorageSpace:e.data.totalStorageSpace,startTime:e.data.startTime,endTime:e.data.endTime,effectTime:e.data.startTime?[e.data.startTime,e.data.endTime]:""};t.form=a,t.dataIsChange=-1})},onSubmit:function(t){var e=this;this.time_range=this.effectTime||[],this.form.startTime=this.form.effectTime[0],this.form.endTime=this.form.effectTime[1],this.$refs[t].validate(function(t){t&&Object(i["a"])(e.form).then(function(t){e.$message.success("修改租户成功！"),e.noLeaveprompt=!0,e.$router.push({path:"/enterpriseData/detail",query:{_id:e.id}})})})},cancel:function(t){this.$router.push({path:"/enterpriseData/list"})},intNum:function(t,e){if(!t)return!1;this.form[e]="totalStorageSpace"===e?Object(n["g"])(t):Object(n["f"])(t)},blurNum:function(t){this.form.totalStorageSpace=Object(n["b"])(t,2)}},beforeRouteLeave:function(t,e,a){var r=this;this.dataIsChange&&!this.noLeaveprompt?setTimeout(function(){r.$confirm("您的数据尚未保存，是否离开？","离开页面",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){a(!1)})},200):a()}},m=s,c=(a("132a"),a("2877")),u=Object(c["a"])(m,r,o,!1,null,"42d35926",null);e["default"]=u.exports},ec5d:function(t,e,a){"use strict";a.d(e,"c",function(){return o}),a.d(e,"b",function(){return n}),a.d(e,"a",function(){return i});var r=a("b775");function o(t){return Object(r["a"])({url:"/system/customResource/findCustomResourceList",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/system/customResource/getCustomResourceById",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/system/customResource/setCustomResourceById",method:"post",data:t})}}}]);
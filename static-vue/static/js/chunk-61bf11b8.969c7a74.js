(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61bf11b8"],{"2ee0":function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return m}),n.d(t,"g",function(){return c});var r=n("b775");function a(){return Object(r["a"])({url:"/system/menuV2/findAllMenus",method:"post",data:{}})}function u(e){return Object(r["a"])({url:"/system/menuV2/findMenuList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/system/menuV2/addmenu",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/system/menuV2/findMenuById",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/system/menuV2/updatemenu",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/system/menuV2/deletemenu",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/system/menuV2/updownmenu",method:"post",data:e})}},"321f":function(e,t,n){"use strict";var r=n("7d85"),a=n.n(r);a.a},5160:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-edit"},[n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","status-icon":!0}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"menuname"}},[n("el-input",{attrs:{placeholder:"请输入菜单名称",maxlength:"12",clearable:""},model:{value:e.form.menuname,callback:function(t){e.$set(e.form,"menuname",t)},expression:"form.menuname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单标识",prop:"cmark"}},[n("el-input",{attrs:{placeholder:"请输入菜单标识",maxlength:"64",clearable:""},model:{value:e.form.cmark,callback:function(t){e.$set(e.form,"cmark",t)},expression:"form.cmark"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单图标"}},[n("el-input",{attrs:{placeholder:"请输入菜单图标",maxlength:"50",clearable:""},model:{value:e.form.imagename,callback:function(t){e.$set(e.form,"imagename",t)},expression:"form.imagename"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单路径",prop:"menuurl"}},[n("el-input",{attrs:{placeholder:"请输入菜单路径",maxlength:"120",clearable:""},model:{value:e.form.menuurl,callback:function(t){e.$set(e.form,"menuurl",t)},expression:"form.menuurl"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单模块",prop:"type"}},[n("el-select",{attrs:{placeholder:"请选择菜单模块",clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.menuType,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),n("div",{staticClass:"tip"},[e._v("系统后台归属的菜单，不会出现在租户菜单列表中")])],1),e._v(" "),n("el-form-item",{attrs:{label:"父级菜单"}},[n("el-input",{attrs:{value:e.form.pname,disabled:!0}})],1)],1),e._v(" "),n("div",{attrs:{id:"btnGroup"}},[n("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(t){return e.save("form")}}},[e._v("保存")]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.cancel("form")}}},[e._v("取消")])],1)],1)},a=[],u=(n("96cf"),n("3b8d")),s=n("db72"),i=n("2f62"),o=n("2ee0"),m=n("be22"),c={computed:Object(s["a"])({},Object(i["b"])(["menuType"])),data:function(){return{dataIsChange:0,noLeaveprompt:!1,form:{menuname:"",cmark:"",imagename:"",menuurl:"",type:""},id:"",rules:{menuname:[{required:!0,message:"请输入菜单名称（长度在 1 到 12 个字符）",trigger:"blur"},{required:!0,message:"请输入菜单名称（长度在 1 到 12 个字符）",trigger:"change"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"change"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}],cmark:[{required:!0,message:"请输入菜单标识（长度在 1 到 64 个字符）",trigger:"blur"},{required:!0,message:"请输入菜单标识（长度在 1 到 64 个字符）",trigger:"change"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"change"}],menuurl:[{required:!0,message:"请输入菜单路径（长度在 1 到 120 个字符）",trigger:"blur"},{required:!0,message:"请输入菜单路径（长度在 1 到 120 个字符）",trigger:"change"},{min:1,max:120,message:"长度在 1 到 120 个字符",trigger:"blur"},{min:1,max:120,message:"长度在 1 到 120 个字符",trigger:"change"}],type:[{required:!0,message:"请选择菜单模块",trigger:"change"}]}}},watch:{form:{handler:function(e){e&&this.dataIsChange++},deep:!0}},created:function(){this.id=this.$route.query.id,this.pname=this.$route.query.pname,this.getMenu()},methods:{getMenu:function(){var e=this;Object(o["f"])({_id:this.id}).then(function(t){e.form=t.data.MenuV2,e.dataIsChange=-1})},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&Object(o["c"])(t.form).then(function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("修改菜单成功！"),t.noLeaveprompt=!0,Object(m["a"])(),t.$router.push({path:"/systemManage/menuManage/detail",query:{_id:t.id}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())})},cancel:function(e){this.$router.push({path:"/systemManage/menuManage/list"})}},beforeRouteLeave:function(e,t,n){var r=this;this.dataIsChange&&!this.noLeaveprompt?setTimeout(function(){r.$confirm("您的数据尚未保存，是否离开？","离开页面",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()}).catch(function(){n(!1)})},200):n()}},l=c,f=(n("321f"),n("2877")),d=Object(f["a"])(l,r,a,!1,null,"d01a3050",null);t["default"]=d.exports},"7d85":function(e,t,n){},be22:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("96cf");var r=n("3b8d"),a=n("a18c"),u=n("4360");function s(){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].dispatch("user/getInfo");case 2:return t=e.sent,n=t.systemRoutes,r=t.backstageRoutes,e.next=7,u["a"].dispatch("permission/generateRoutes",{systemRoutes:n,backstageRoutes:r});case 7:return Object(a["d"])(),a["c"].addRoutes(u["a"].state.permission.systemRoutes),e.next=11,u["a"].dispatch("permission/set_permission_routes",1);case 11:case"end":return e.stop()}},e)})),i.apply(this,arguments)}}}]);
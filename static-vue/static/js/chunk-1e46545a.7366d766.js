(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e46545a"],{"193e":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-edit"},[o("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","status-icon":!0}},[o("el-form-item",{attrs:{label:"租户名称",prop:"customname"}},[o("el-input",{attrs:{placeholder:"请输入租户名称",maxlength:"64",clearable:""},model:{value:e.form.customname,callback:function(t){e.$set(e.form,"customname",t)},expression:"form.customname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"租户描述",prop:"desc"}},[o("el-input",{attrs:{placeholder:"请输入租户描述",maxlength:"100",clearable:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"最大用户数",prop:"userCount"}},[o("el-input",{attrs:{placeholder:"请输入最大用户数",clearable:""},nativeOn:{keyup:function(t){return e.intNum(e.form.userCount)}},model:{value:e.form.userCount,callback:function(t){e.$set(e.form,"userCount",t)},expression:"form.userCount"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"租户状态",prop:"customStatus"}},[o("el-radio-group",{model:{value:e.form.customStatus,callback:function(t){e.$set(e.form,"customStatus",t)},expression:"form.customStatus"}},[o("el-radio",{attrs:{label:1}},[e._v("生效")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("失效")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"开通智能搜索",prop:"text_extraction"}},[o("el-radio-group",{model:{value:e.form.text_extraction,callback:function(t){e.$set(e.form,"text_extraction",t)},expression:"form.text_extraction"}},[o("el-radio",{attrs:{label:1}},[e._v("开启")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("关闭")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"租户管理员",prop:"uName"}},[o("el-input",{attrs:{placeholder:"请输入租户管理员",maxlength:"64",clearable:""},model:{value:e.form.uName,callback:function(t){e.$set(e.form,"uName",t)},expression:"form.uName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"管理员昵称",prop:"uNickname"}},[o("el-input",{attrs:{placeholder:"请输入管理员昵称",maxlength:"20",clearable:""},model:{value:e.form.uNickname,callback:function(t){e.$set(e.form,"uNickname",t)},expression:"form.uNickname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"管理员密码",prop:"uPwd"}},[o("el-input",{attrs:{placeholder:"请输入管理员密码",type:"password",autocomplete:"new-password",maxlength:"50",clearable:""},model:{value:e.form.uPwd,callback:function(t){e.$set(e.form,"uPwd",t)},expression:"form.uPwd"}})],1),e._v(" "),o("el-form-item",{staticClass:"logoClass",attrs:{label:"平台Logo"}},[o("el-upload",{ref:"uploadDeskTopLogo",staticClass:"uploadDeskTopLogo",attrs:{name:"thumbnailfile",action:e.uploadUrl(),headers:e.headers,accept:".jpg,.png,.gif,.jepg,.jpeg",drag:"",data:e.fileInfo,limit:2,"file-list":e.fileList1,"list-type":"picture-card","auto-upload":!1,"on-change":e.changeUpload,"on-success":e.handleSuccess,"on-error":e.handleUploadError,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove},nativeOn:{click:function(t){return e.logoTypes(1)}}},[o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),o("el-form-item",{staticClass:"logoClass",attrs:{label:"移动端Logo"}},[o("el-upload",{ref:"uploadMobileLogo",staticClass:"uploadMobileLogo",attrs:{name:"thumbnailfile",action:e.uploadUrl(),headers:e.headers,accept:".jpg,.png,.gif,.jepg,.jpeg",drag:"",data:e.fileInfo,limit:2,"file-list":e.fileList2,"list-type":"picture-card","auto-upload":!1,"on-change":e.changeUpload,"on-success":e.handleSuccess,"on-error":e.handleUploadError,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove},nativeOn:{click:function(t){return e.logoTypes(2)}}},[o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),o("el-form-item",{attrs:{label:"个性化系统名称"}},[o("el-input",{attrs:{maxlength:"64",placeholder:"请输入系统名称",clearable:""},model:{value:e.form.customSystemName,callback:function(t){e.$set(e.form,"customSystemName",t)},expression:"form.customSystemName"}})],1)],1),e._v(" "),o("div",{attrs:{id:"btnGroup"}},[o("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")]),e._v(" "),o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.cancel("form")}}},[e._v("取消")])],1),e._v(" "),o("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"图片剪裁",visible:e.cropperDialogVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.cropperDialogVisible=t},close:e.closeUpload}},[o("div",{staticClass:"cropper-content"},[o("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[o("vueCropper",{ref:"cropper",attrs:{img:e.option.img,"output-size":e.option.size,"output-type":e.option.outputType,info:e.option.info,full:e.option.full,fixed:e.option.fixed,"fixed-number":e.option.fixedNumber,"can-move":e.option.canMove,"can-move-box":e.option.canMoveBox,"fixed-box":e.option.fixedBox,original:e.option.original,"auto-crop":e.option.autoCrop,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight,"center-box":e.option.centerBox,high:e.option.high},on:{realTime:e.realTime,imgLoad:e.imgLoad}}),e._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"downLoadImg",attrs:{href:"javascript:;"}})],1),e._v(" "),o("div",{staticClass:"show-preview",style:{width:"180px",height:"180px",overflow:"hidden",margin:"5px"}},[o("div",{staticClass:"preview",style:e.previews.div},[o("img",{staticClass:"previewImg",attrs:{src:e.previews.url}})])])]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:e.finish}},[e._v("确认")]),e._v(" "),o("el-button",{on:{click:e.closeUpload}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"图片预览",width:"38%",visible:e.logoDialogVisible},on:{"update:visible":function(t){e.logoDialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.logoUrl,alt:""}})])],1)},a=[],i=(o("7f7f"),o("61f7")),n=o("7e79"),l=o("a888"),s=o("aebb"),u=o("c0d7"),c=o("5f87"),m=window.$,d={components:{VueCropper:n["VueCropper"]},directives:{elDragDialog:l["a"]},data:function(){var e=function(e,t,o){t||0===t?Object(i["e"])(t)?o():o(new Error("2 到 64 位字母和数字的组合，不能连续11位数字")):o(new Error("请输入租户管理员（长度在 2 到 64 个字符）"))},t=function(e,t,o){t||0===t?Object(i["d"])(t)?o():o(new Error("6 到 50 位字母和数字的组合")):o(new Error("请输入管理员密码"))};return{dataIsChange:0,noLeaveprompt:!1,form:{customname:"",desc:"",userCount:"",customStatus:1,text_extraction:1,uName:"",uNickname:"",uPwd:"",pcLogoFileId:"",pcLogoFileUrl:"",mobileLogoFileId:"",mobileLogoFileUrl:"",customSystemName:""},loading:!1,headers:{Authorization:Object(c["a"])()},logoType:"",fileName:"",fileList1:[],fileList2:[],cropperDialogVisible:!1,logoDialogVisible:!1,clearFiles:!0,logoUrl:"",deskTopImageUrl:"",mobileImageUrl:"",fileInfo:{},option:{img:"",info:!1,outputSize:.8,outputType:"png",canScale:!1,fixedBox:!1,fixed:!0,fixedNumber:[1,1],autoCrop:!0,autoCropWidth:180,autoCropHeight:180,full:!1,canMoveBox:!0,original:!1,centerBox:!0,infoTrue:!0,high:!0,size:1},previews:{},rules:{customname:[{required:!0,message:"请输入租户名称（长度在 1 到 64 个字符）",trigger:"blur"},{required:!0,message:"请输入租户名称（长度在 1 到 64 个字符）",trigger:"change"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"change"}],desc:[{required:!0,message:"请输入租户描述（长度在 1 到 100 个字符）",trigger:"blur"},{required:!0,message:"请输入租户描述（长度在 1 到 100 个字符）",trigger:"change"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"change"}],userCount:[{required:!0,message:"请输入最大用户数（长度在 1 到 120 个字符）",trigger:"blur"},{required:!0,message:"请输入最大用户数（长度在 1 到 120 个字符）",trigger:"change"}],customStatus:[{required:!0,message:"请选择租户状态",trigger:"change"}],text_extraction:[{required:!0,message:"请选择是否开通智能搜索",trigger:"change"}],uName:[{required:!0,validator:e,trigger:"blur"},{required:!0,validator:e,trigger:"change"},{min:2,max:64,message:"长度在 2 到 64 个字符",trigger:"blur"},{min:2,max:64,message:"长度在 2 到 64 个字符",trigger:"change"}],uNickname:[{required:!0,message:"请输入管理员昵称（长度在 2 到 20 个字符）",trigger:"blur"},{required:!0,message:"请输入管理员昵称（长度在 2 到 20 个字符）",trigger:"change"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"change"}],uPwd:[{required:!0,validator:t,trigger:"blur"},{required:!0,validator:t,trigger:"change"}]}}},watch:{form:{handler:function(e){e&&this.dataIsChange++},deep:!0}},methods:{onSubmit:function(e){var t=this;console.log("http://bs.yunshicloud.com/"),this.$refs[e].validate(function(e){e&&Object(s["a"])(t.form).then(function(e){t.$message.success("新增租户成功！"),t.noLeaveprompt=!0,t.$router.push({path:"/systemManage/tenantManage/detail",query:{_id:e.data.id}})})})},cancel:function(e){this.$router.push({path:"/systemManage/tenantManage/list"})},uploadUrl:function(){return"http://bs.yunshicloud.com/system/file/upload/"},logoTypes:function(e){this.logoType=e},changeUpload:function(e,t){var o=this,r=[".png",".jpg",".gif",".jepg",".jpeg"],a=e.name.lastIndexOf("."),i=e.name.slice(a);if(-1===r.indexOf(i))return this.$message.error("文件格式错误！"),1===this.logoType?this.fileList1=[]:this.fileList2=[],!1;var n=e.size/1024/1024<5;if(!n)return this.$message.error("上传文件大小不能超过 5MB！"),1===this.logoType?this.fileList1=[]:this.fileList2=[],!1;this.fileName=e.name,this.$nextTick(function(){o.option.img=e.url,o.cropperDialogVisible=!0})},handleSuccess:function(e,t,o){console.log(t)},handleUploadError:function(e,t,o){this.$message.error("上传文件失败！"),1===this.logoType?this.fileList1=[]:this.fileList2=[]},beforeRemove:function(e,t){return this.$confirm("您确定要删除logo吗？","删除图片",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},handleRemove:function(e,t){console.log(e,t),1===this.logoType?(this.form.pcLogoFileId="",this.form.pcLogoFileUrl="",m(".uploadDeskTopLogo .el-upload--picture-card").show()):(this.form.mobileLogoFileId="",this.form.mobileLogoFileUrl="",m(".uploadMobileLogo .el-upload--picture-card").show())},handlePreview:function(e){this.logoUrl=e.url,this.logoDialogVisible=!0},finish:function(){var e=this;this.clearFiles=!1;var t=new FormData;this.$refs.cropper.getCropBlob(function(o){t.append("thumbnailfile",o,e.fileName),Object(u["d"])(t).then(function(t){e.$message.success("上传成功！"),1===e.logoType?(e.deskTopImageUrl=t.data.saveHttpPath,e.form.pcLogoFileUrl=t.data.saveHttpPath,e.form.pcLogoFileId=t.data.id,e.fileList1=[{name:t.data.originalFilename,url:t.data.saveHttpPath}],m(".uploadDeskTopLogo .el-upload--picture-card").hide()):(e.mobileImageUrl=t.data.saveHttpPath,e.form.mobileLogoFileUrl=t.data.saveHttpPath,e.form.mobileLogoFileId=t.data.id,e.fileList2=[{name:t.data.originalFilename,url:t.data.saveHttpPath}],m(".uploadMobileLogo .el-upload--picture-card").hide()),e.fileInfo={},e.cropperDialogVisible=!1})})},closeUpload:function(){this.clearFiles&&(1===this.logoType?this.$refs["uploadDeskTopLogo"].clearFiles():this.$refs["uploadMobileLogo"].clearFiles(),this.cropperDialogVisible=!1,this.clearFiles=!0),this.clearFiles=!0},realTime:function(e){var t=this;this.$refs.cropper.getCropData(function(o){t.previews=e,t.previews.url=o})},imgLoad:function(e){console.log(e)},intNum:function(e){this.form.userCount=Object(i["f"])(e)}},beforeRouteLeave:function(e,t,o){var r=this;this.dataIsChange&&!this.noLeaveprompt?setTimeout(function(){r.$confirm("您的数据尚未保存，是否离开？","离开页面",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o()}).catch(function(){o(!1)})},200):o()}},p=d,f=(o("6fc3"),o("2877")),g=Object(f["a"])(p,r,a,!1,null,"2fb870b0",null);t["default"]=g.exports},"6fc3":function(e,t,o){"use strict";var r=o("b9d2"),a=o.n(r);a.a},a888:function(e,t,o){"use strict";o("a481"),o("6762"),o("2fdb");var r={bind:function(e,t,o){var r=e.querySelector(".el-dialog__header"),a=e.querySelector(".el-dialog");r.style.cssText+=";cursor:move;",a.style.cssText+=";top:0px;";var i=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();r.onmousedown=function(e){var t=e.clientX-r.offsetLeft,n=e.clientY-r.offsetTop,l=a.offsetWidth,s=a.offsetHeight,u=document.body.clientWidth,c=document.body.clientHeight,m=a.offsetLeft,d=u-a.offsetLeft-l,p=a.offsetTop,f=c-a.offsetTop-s,g=i(a,"left"),h=i(a,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var r=e.clientX-t,i=e.clientY-n;-r>m?r=-m:r>d&&(r=d),-i>p?i=-p:i>f&&(i=f),a.style.cssText+=";left:".concat(r+g,"px;top:").concat(i+h,"px;"),o.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},a=function(e){e.directive("el-drag-dialog",r)};window.Vue&&(window["el-drag-dialog"]=r,Vue.use(a)),r.install=a;t["a"]=r},aebb:function(e,t,o){"use strict";o.d(t,"e",function(){return a}),o.d(t,"a",function(){return i}),o.d(t,"g",function(){return n}),o.d(t,"d",function(){return l}),o.d(t,"c",function(){return s}),o.d(t,"b",function(){return u}),o.d(t,"i",function(){return c}),o.d(t,"f",function(){return m}),o.d(t,"j",function(){return d}),o.d(t,"k",function(){return p}),o.d(t,"h",function(){return f});var r=o("b775");function a(e){return Object(r["a"])({url:"/system/customV2/findCustomList",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/system/customV2/addcustom",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/system/customV2/findCustomById",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/system/customV2/updatecustom",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/system/customV2/deletecustom",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/system/customV2/deleteMultiCustom",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/system/customV2/setCustomStatus",method:"post",data:e})}function m(e){return Object(r["a"])({url:"system/newscategory/all",method:"post",data:e})}function d(e){return Object(r["a"])({url:"system/custom/saveCustomCategory",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/system/user/upload",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/system/user/onload",method:"post",data:e})}},b9d2:function(e,t,o){},c0d7:function(e,t,o){"use strict";o.d(t,"d",function(){return n}),o.d(t,"b",function(){return l}),o.d(t,"a",function(){return s}),o.d(t,"c",function(){return u});var r=o("b775"),a=o("bc3a"),i=o.n(a);function n(e){return Object(r["a"])({url:"/system/file/upload/",method:"post",data:e})}function l(e,t){return i()({url:t+"/fileUploadCheck",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/workDeskFileList/addFile",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/knowledgeDirFile/createFile",method:"post",data:e})}}}]);